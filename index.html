<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" 
          content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
    <!-- Zuora Public javascript library -->
    <script type="text/javascript" 
            src="https://static.zuora.com/Resources/libs/hosted/1.3.1/zuora-min.js"></script>

    <script>
    // Optional params in case prepopulation of certain fields is desired
    var prepopulateFields = {
        creditCardAddress1: "123 Any Street",
        creditCardAddress2: "Suite #999",
        creditCardCountry: "USA",
        creditCardHolderName: "John Doe"
    };

    // Sample params for rendering iframe on the client side
    var params = {
        tenantId: 20000561, 
        id: "8acce27195656acd01956fc0091e42a8",  
        token: "GAFnxlUcU4TVdvwSuxRiPUWknqMec2ph", 
        signature: "RuNTkAX+inALyMUngsQKjBTEmY04uLhDA0wfE079I43S9W5Fkjt/xfEnmmwzZ7JSupDwJj66us7ZG3/oILDhdu4Zw24lUbuIwINNSsFee/DGUeB5pJ2UOGe7Zg11oHc9dESIjOgW1NiVzQ+vzXyz4gR8hw+hVaYIaI668qq5ES69SclCdeB2164qVx4XphmH6F1+165KpeNf5FFUzp7hY20xKE8lqxhjG1yk/MLyIWU9cHMQoHVx9gRsqcy9qDmTG77V4N/btqqrUZgVgsoHUbb5qdb1LlDqsv17XgBfatTZgySQI/1wgogfGr3knVayD194s2mDqA9K9D3IntAEBA==",  // Full RSA signature
        style: "Inline",  // Choose the payment form style (can be 'overlay', 'embedded', etc.)
        key: "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwTHbffQM3oq5kjMRqhdYPN7bT574Td5w0xYY3CzKrTyUMfzH1i7ZQAFpq6qBQAi1VEUYi9aJUQCPx6xGs7eTDf001Zxx6895u8DoM5q9HprOBruEvvEwWOiQz2kuG7WisygEhBhrxukiRaodleA/AD7KDgudRdroCnYy+mpXsmHB/ALQuHj2JOvB+KPSEsP3anj+xF0gjByBSHYg/IBnOUz2SVWAyy0AyyosqTIsVC8buy+8RoWTsyRLfRR+f70cVAGYKbigfHQFdB5kP2NvytVfMtTQAtkKgdXMOuKnL3bHjAfWUKDW2wKyYiPHBb2Z+9ZIAvAKKSpzgMtjPQNv3QIDAQAB",  // RSA public key
        submitEnabled: "true",  
        locale: "en_US",  // Locale, e.g., 'en_US' for English
        param_supportedTypes: "Visa,MasterCard",  // Supported card types
        url: "https://test.eu.zuora.com/apps/PublicHostedPageLite.do",  
        paymentGateway: "DefaultGateway"  
    };

    // Callback function for response handling
    function callback(response) {
        if (response.success) {
            // Redirect to a thank you page after a successful payment
            var redirectUrl = "../thanks?refid=" + response.refId + "&field_passthrough1=" + response.field_passthrough1;
            window.location.replace(redirectUrl);
        } else {
            // Display error message in case of failure
            alert("Error Code: " + response.errorCode + ", Error Message: " + response.errorMessage);
        }
    }

    // Function to load the Zuora hosted payment page
    function loadHostedPage() {
        // Event handler for when the HPP iframe is loaded
        Z.setEventHandler("onloadCallback", function() {
            console.warn("HPP page is loaded.");
        });

        // Render the Zuora payment page
        Z.render(params, prepopulateFields, callback);
    }
    </script>
</head>

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" 
          content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
    <!-- Zuora Public javascript library -->
    <script type="text/javascript" 
            src="https://static.zuora.com/Resources/libs/hosted/1.3.1/zuora-min.js"></script>

    <script>
    // Optional params in case prepopulation of certain fields is desired
    var prepopulateFields = {
        creditCardAddress1: "123 Any Street",
        creditCardAddress2: "Suite #999",
        creditCardCountry: "USA",
        creditCardHolderName: "John Doe"
    };

    // Sample params for rendering iframe on the client side
    var params = {
        tenantId: 20000561, 
        id: "8acce27195656acd01956fc0091e42a8",  
        token: "Q6abyW6ERajLYWNWXuK3ffDEK6kpcyBE", 
        signature: "Tq0mLvq44M9dnTy/54oaA7gAMHc/Y9hAvH4boTVuXmGtziYVrrsGY8MGP4lqDcNQMcRj3aEaR8mzRqr0pI2umFayGSWg/1LCFIIf9ye3XsAuJaoGf63HYmDyNa6k/h3JQduGzFXt1zA7ac2SUdSRwKjbNCraken9CGNnnRpgm1Jrss7eGU+55e1XI+Oo2mS7MCeQ8VH3t8f/7ncGtsKbCkzIFRZzyzihtcS9eWxuYvzLPisLNu8wElIppACinSm4HygNFod1zD/Q+kxzROJ9qqFt8acu/bKZ+aFnJaBO/mBeFgxcliFuNe/fyTipNRJSEQYnC3CepUHXg5YR7PRmjQ==",  // Full RSA signature
        style: "Inline",  // Choose the payment form style (can be 'overlay', 'embedded', etc.)
        key: "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwTHbffQM3oq5kjMRqhdYPN7bT574Td5w0xYY3CzKrTyUMfzH1i7ZQAFpq6qBQAi1VEUYi9aJUQCPx6xGs7eTDf001Zxx6895u8DoM5q9HprOBruEvvEwWOiQz2kuG7WisygEhBhrxukiRaodleA/AD7KDgudRdroCnYy+mpXsmHB/ALQuHj2JOvB+KPSEsP3anj+xF0gjByBSHYg/IBnOUz2SVWAyy0AyyosqTIsVC8buy+8RoWTsyRLfRR+f70cVAGYKbigfHQFdB5kP2NvytVfMtTQAtkKgdXMOuKnL3bHjAfWUKDW2wKyYiPHBb2Z+9ZIAvAKKSpzgMtjPQNv3QIDAQAB",  // RSA public key
        submitEnabled: "true",  
        locale: "en_US",  // Locale, e.g., 'en_US' for English
        param_supportedTypes: "Visa,MasterCard",  // Supported card types
        url: "https://test.eu.zuora.com/apps/PublicHostedPageLite.do",  
        paymentGateway: "DefaultGateway"  
    };

    // Callback function for response handling
    function callback(response) {
        if (response.success) {
            // Redirect to a thank you page after a successful payment
            var redirectUrl = "../thanks?refid=" + response.refId + "&field_passthrough1=" + response.field_passthrough1;
            window.location.replace(redirectUrl);
        } else {
            // Display error message in case of failure
            alert("Error Code: " + response.errorCode + ", Error Message: " + response.errorMessage);
        }
    }

    // Function to load the Zuora hosted payment page
    function loadHostedPage() {
        // Event handler for when the HPP iframe is loaded
        Z.setEventHandler("onloadCallback", function() {
            console.warn("HPP page is loaded.");
        });

        // Render the Zuora payment page
        Z.render(params, prepopulateFields, callback);
    }
    </script>
</head>

<body onload="LoadPaymentPages(jsodata, prepopulatedata, req)">
    <nav class="navigation container">
        <div class="nav-brand">Zuora Payment Pages 2.0 Integration Guide</div>
        <ul class="list-non-bullet nav-pills">
            <li class="list-item-inline">
                <a href="/" class="link">Home</a>
            </li>
            <li class="nav-pills list-item-inline">
                <a href="https://knowledgecenter.zuora.com/Billing/Billing_and_Payments/LA_Hosted_Payment_Pages/B_Payment_Pages_2.0">Knowledge Center</a>
            </li>
        </ul>
    </nav>

    <div class="hide container hero" id="attemptexceed">
        <h2 class="hero-heading">
            Attempt <span class="heading-inverted">exceed</span>
            the limitation :( We will refresh the page in 5 seconds
        </h2>
    </div>

    <div id="zuora_payment" class="container container-center"></div>
    <div id="checkBoxDiv" class="list-item" hidden>
        <input id="agreement" type="checkbox">agreement
    </div>

    <footer class="footer">
        <div class="footer-header">Deliver the ultimate subscriber experience</div>
        <ul>
            <li class="list-item-inline">
                <a class="link" href="https://www.zuora.com/products/billing-software/">Billing</a>
            </li>
            <li class="list-item-inline">
                <a class="link" href="https://www.zuora.com/products/collect/">Zuora Collect</a>
            </li>
            <li class="list-item-inline">
                <a class="link" href="https://www.zuora.com/products/revenue/">Zuora Revenue</a>
            </li>
            <li class="list-item-inline">
                <a class="link" href="https://www.zuora.com/products/zuora-central-platform/">Central Platform</a>
            </li>
        </ul>
    </footer>
</body>
